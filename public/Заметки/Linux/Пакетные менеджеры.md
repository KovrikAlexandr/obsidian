apt использует под капотом dpkg (debian package).
dpkg работает с .deb архивами. Он может устанавливать, удалять и прочее.
База:
```bash
dpkg -i pkg.deb # install
dpkg -r pkg # remove
dpkg -P pkg # purge
dpkg -l # list all
dpkg -L pkg # List files installed by package
dpkg -I pkg.deb # Get info
```

## Структура пакета
`.deb` файл можно исследовать:
```bash
dpkg -I pkg.deb
```

Сам файл архив `ar`. Это древний Unix-архиватор.
Базовое использование:
```bash
ar t file.a # List content
ar x file.a # extract all files to current dir
ar x file.a filename # extracts certain file
ar r file.a file1 file2 # add/replace files in archive
ar d filez filename # removes file from archive
```

Вытаскиваем содержимое пакета:
```bash 
ar x file.deb
```
Получаем три файла (два из них архивы):
```
debian-binary
control.tar.xz
data.tar.xz
```
- `debian-binary` – текст. Обычно версия формата пакета (не самого пакета).
- `control.tar.xz` – метаданные + `preinst`, `postinst`, `prerm` и `postrm` скрипты (просто bash)
- `data.tar.xz` – сама программа + файлы с данными.

Архивы запакованы через `tar` с применением сжатия `xz` (определяется не из имени, а из хедера). 
Базовое использование `tar`:
```bash
tar -x -f file.tar.xz # extracts
tar -xf file.tar.xz # also works
```



